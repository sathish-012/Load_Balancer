<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Snake Server</title>
  <style>
    body { margin: 0; overflow: hidden; background: #1d1f20; font-family: Arial, sans-serif; }
    #score { position: absolute; top: 10px; left: 20px; font-size: 22px; font-weight: bold; color: #fff; }
    #gameOver { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                font-size: 40px; color: red; display: none; font-weight: bold; text-shadow: 2px 2px 6px black; }
    canvas { display: block; }
  </style>
</head>
<body>
  <canvas id="game"></canvas>
  <div id="score">Score: 0</div>
  <div id="gameOver">ðŸ’€ Game Over! </div>

  <script>
    const cvs = document.getElementById('game');
    const ctx = cvs.getContext('2d');
    let size = 25; // block size
    let cols, rows;

    function resizeCanvas(){
      cvs.width = window.innerWidth;
      cvs.height = window.innerHeight;
      cols = Math.floor(cvs.width / size);
      rows = Math.floor(cvs.height / size);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let snake = [{x: 10, y: 10}];
    let food = {x: 5, y: 5};
    let dx = 1, dy = 0;
    let alive = true;
    let score = 0;
    let speed = 120; // ms per move
    let foodPulse = 0;

    function rnd(max){ return Math.floor(Math.random()*max); }
    function placeFood(){
      food = {x: rnd(cols), y: rnd(rows)};
    }

    document.addEventListener('keydown', e => {
      if(e.key === 'ArrowUp' && dy !== 1){ dx = 0; dy = -1; }
      else if(e.key === 'ArrowDown' && dy !== -1){ dx = 0; dy = 1; }
      else if(e.key === 'ArrowLeft' && dx !== 1){ dx = -1; dy = 0; }
      else if(e.key === 'ArrowRight' && dx !== -1){ dx = 1; dy = 0; }
    });

    function loop(){
      if(!alive) return;

      const head = {x: snake[0].x + dx, y: snake[0].y + dy};

      // wrap around edges
      head.x = (head.x + cols) % cols;
      head.y = (head.y + rows) % rows;

      // collision with self
      if(snake.some(s => s.x === head.x && s.y === head.y)){
        alive = false;
        document.getElementById("gameOver").style.display = "block";
        return;
      }

      snake.unshift(head);

      if(head.x === food.x && head.y === food.y){
        score++;
        document.getElementById("score").innerText = "Score: " + score;
        placeFood();
        if(speed > 50) speed -= 2; // speed up
      } else {
        snake.pop();
      }

      // draw background (gradient grass)
      const gradient = ctx.createLinearGradient(0, 0, cvs.width, cvs.height);
      gradient.addColorStop(0, "#1e3c1e");
      gradient.addColorStop(1, "#2e572e");
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, cvs.width, cvs.height);

      // grid lines
      ctx.strokeStyle = 'rgba(255,255,255,0.05)';
      for(let x=0;x<cvs.width;x+=size){ 
        ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,cvs.height); ctx.stroke(); 
      }
      for(let y=0;y<cvs.height;y+=size){ 
        ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(cvs.width,y); ctx.stroke(); 
      }

      // animate food pulse
      foodPulse += 0.1;
      let radius = size/2 - 3 + Math.sin(foodPulse)*2;
      ctx.fillStyle = '#ff3b3b'; 
      ctx.beginPath();
      ctx.arc(food.x*size + size/2, food.y*size + size/2, radius, 0, Math.PI*2);
      ctx.shadowColor = "#ff0000";
      ctx.shadowBlur = 15;
      ctx.fill();
      ctx.shadowBlur = 0;

      // draw snake
      snake.forEach((s, i) => {
        ctx.fillStyle = (i === 0) ? '#0f0' : '#4caf50';
        ctx.beginPath();
        ctx.roundRect(s.x*size, s.y*size, size, size, 6);
        ctx.fill();

        // add eyes to head
        if(i === 0){
          ctx.fillStyle = "#000";
          ctx.beginPath();
          ctx.arc(s.x*size + size*0.3, s.y*size + size*0.3, 3, 0, Math.PI*2);
          ctx.arc(s.x*size + size*0.7, s.y*size + size*0.3, 3, 0, Math.PI*2);
          ctx.fill();
        }
      });

      setTimeout(loop, speed);
    }

    placeFood(); 
    loop();
  </script>
</body>
</html>
